<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dad Joke Card</title>
    <style>
        .joke-card {
            width: 185px;
            height: auto;
            border-radius: 4px;
            padding: 4px;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
			align-items: center;
        }
		.joke-title {
			font-size: 1.1em;
			text-align: center;
			font-weight: bold;
			margin-bottom: 4px;
		}
        .joke-setup {
            margin-bottom: 6px;
			text-align: center;
        }	
        .vote-buttons {
			display: flex;
			gap: 10px;
			margin-top: 5px;
        }
		.vote-buttons {
			font-size: 1.2em;
			cursor: pointer;
		}
		#vote-result {
			font-size: 0.9em;
			margin-top: 5px;
			text-align: center;
		}	
    </style>
</head>
<body>
    <div class="joke-card" id="jokeCard">
		<div class="joke-title">Dad Joke Generator </div>
        <div class="joke-setup" id="setup">Loading joke...</div>
		<div class="vote-buttons">
      <button id="thumbs-up">üëç</button>
      <button id="thumbs-down">üëé</button>
    </div>
    <div id="vote-result"></div>
    </div>
	<script>
    	document.addEventListener("DOMContentLoaded", function () {
            const setupEl = document.getElementById("setup");
      const thumbsUp = document.getElementById("thumbs-up");
      const thumbsDown = document.getElementById("thumbs-down");
      const voteResult = document.getElementById("vote-result");
      let jokeLoaded = false;
      let voted = false;
      // Fetch dad joke from icanhazdadjoke (CORS-safe)
      fetch("https://icanhazdadjoke.com/", {
        headers: {
          Accept: "application/json"
        }
      })
        .then(res => res.json())
        .then(data => {
          setupEl.textContent = data.joke;
          jokeLoaded = true;
        })
        .catch(err => {
          setupEl.textContent = "Oops! Could not load a joke.";
          console.error("Fetch error:", err);
    	});
			
  // Handle voting
      function handleVote(type) {
        if (!jokeLoaded) {
          alert("Please wait for the joke to load before voting.");
          return;
        }
        if (voted) {
          alert("You already voted. Reload to vote on another joke.");
          return;
        }

        voted = true;
        voteResult.textContent =
          type === "up"
            ? "üòÇ Glad you liked it!"
            : "üòê Maybe the next one will be better.";
      }

      thumbsUp.addEventListener("click", () => handleVote("up"));
      thumbsDown.addEventListener("click", () => handleVote("down"));
    });
			
	</script>
</body>
</html>
