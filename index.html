
<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="css/main.css">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="js/utils.js"></script>

  <!-- Google Analytics (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-71RHKKC4X8"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-71RHKKC4X8');
  </script>

  <!-- Google Analytics (old) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-10MPPHLD10"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-10MPPHLD10');
  </script>

  <title>IT-3350 Dashboard</title>

  <script>
    // Build only the cards that actually exist
    document.addEventListener('DOMContentLoaded', async () => {
      const container = document.getElementById('cards');

      const cards = [
        { src: 'cards/catsapi.html', width: 450, height: 650, scrolling: 'no' },
        { src: 'cards/clock.html' },
        { src: 'cards/random_dog.html' },
        { src: 'cards/tron.html' },
        { src: 'cards/currency.html' },
        { src: 'cards/temperature.html', width: 400 },
        { src: 'cards/randomrecipe.html' },
        { src: 'cards/nutritionix-api.html' },
        { src: 'cards/DateTime.html' },
        { src: 'cards/NIST-NVD.html', width: 400, scrolling: 'yes' },
        { src: 'cards/rt-apod.html' },
        { src: 'cards/dad_joke.html' },
        { src: 'cards/zaid_pokemon.html' }
      ];

      async function exists(path) {
        try {
          const res = await fetch(path, { method: 'HEAD' });
          return res.ok;
        } catch {
          return false;
        }
      }

      // Create iframes only for files that are present
      for (const c of cards) {
        if (await exists(c.src)) {
          const iframe = document.createElement('iframe');
          iframe.className = 'card';
          iframe.src = c.src;
          iframe.scrolling = c.scrolling || 'no';
          if (c.width)  iframe.style.width  = c.width + 'px';
          if (c.height) iframe.style.height = c.height + 'px';
          container.appendChild(iframe);

          // Auto-resize after load (same-origin only)
          iframe.addEventListener('load', () => {
            try {
              const doc = iframe.contentWindow.document;
              if (!c.height) iframe.style.height = doc.body.scrollHeight + 'px';
            } catch {
              // CORS: ignore
            }
          });
        } else {
          console.warn('Skipping missing card:', c.src);
        }
      }
    });
  </script>
</head>

<body>
  <center><h3>Web Widget Dashboard</h3></center>

  <div class="cardContainer" id="cards"></div>

  <footer>Powered By Google Analytics</footer>
</body>
</html>
